<%- include("../partials/header"); %>
    <main>
        <div class="order-container">
            <div class="order-header">
                <h2>Order #<%= order.id %></h2>
                <div class="order-meta">
                    <p>Order date: <%= order.date %></p>
                    <p>Status: <span class="badge badge-<%= order.status %>">
                    <%= order.status %>
                </span></p>
                </div>
            </div>

            <div class="products-section">
                <h3>Products</h3>
                <table class="products-table">
                    <thead>
                        <tr>
                            <th>Product Code</th>
                            <th>Product Name</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% order.products.forEach( product => { %>
                        <tr>
                            <td data-label="Product Code"><%= product.productId %></td>
                            <td data-label="Product Name"><%= product.name %></td>
                            <td data-label="Quantity"><%= product.quantity %></td>
                            <td data-label="Price">€<%= product.price %></td>
                            <td data-label="Subtotal">€<%= product.subtotal %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
            <div class="address-grid  customer-info-and-summary">
                <div class="customer-info">
                    <% if (!sameAddress) { %>
                    <div class="address-card default">
                        <div class="address-content">
                            <div class="address-details">
                                <h3>Billing Address</h3>
                                <p><span>Name:</span><%= order.billingAddress.name %></p>
                                <p><span>Address:</span> <%= order.billingAddress.street %></p>
                                <p><span>City:</span><%= order.billingAddress.city %></p>
                                <p><span>Postal Code:</span><%= order.billingAddress.postalCode %></p>
                                <p><span>Phone:</span><%= order.billingAddress.phoneNumber %></p>
                            </div>
                        </div>
                    </div>
                    <% } %>

                    <div class="address-card default">
                        <div class="address-content">
                            <div class="address-details">
                            <h3>Shipping Address</h3>
                                <p><span>Name:</span><%= order.shippingAddress.name %></p>
                                <p><span>Address:</span> <%= order.shippingAddress.street %></p>
                                <p><span>City:</span><%= order.shippingAddress.city %></p>
                                <p><span>Postal Code:</span><%= order.shippingAddress.postalCode %></p>
                                <p><span>Phone:</span><%= order.shippingAddress.phoneNumber %></p>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="order-summary">
                    <h4>Order Summary</h4>
                    <div class="summary-row">
                        <span>Payment Method:</span>
                        <span><%= order.payment %></span>
                    </div>
                    <div class="summary-row">
                        <span>Total without VAT:</span>
                        <span>
                            <%  const withoutVAT = order.total * 0.81 %>
                            €<%= withoutVAT.toFixed(2) %>
                        </span>
                    </div>
                    <div class="summary-row">
                        <span>VAT:</span>
                        <span>
                            <% const VAT =  order.total * 0.19 %>
                            €<%= VAT.toFixed(2) %>
                        </span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span>€<%= order.total %></span>
                    </div>
                    <a class="big-btn continue-shopping-btn btn-primary" href="/products/">← CONTINUE SHOPPING</a>
                </div>

            </div>
        </div>

    </main>



<%- include("../partials/footer"); %>